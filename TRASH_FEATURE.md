# üóëÔ∏è –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –∫–æ—Ä–∑–∏–Ω—ã - –ü–æ–ª–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

## ‚úÖ –°—Ç–∞—Ç—É—Å: **–ü–û–õ–ù–û–°–¢–¨–Æ –†–ï–ê–õ–ò–ó–û–í–ê–ù–û**

---

## üìã –ß—Ç–æ –±—ã–ª–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### **1. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö** ‚úÖ

#### –ú–∏–≥—Ä–∞—Ü–∏—è: `2025_11_08_171010_add_protected_to_folders_table.php`
```php
- folders.protected (boolean) - –∑–∞—â–∏—Ç–∞ –æ—Ç —É–¥–∞–ª–µ–Ω–∏—è
- folders.is_trash (boolean) - —Ñ–ª–∞–≥ –∫–æ—Ä–∑–∏–Ω—ã
```

#### –ú–∏–≥—Ä–∞—Ü–∏—è: `2025_11_08_171039_add_original_folder_id_to_media_table.php`
```php
- media.original_folder_id - –æ—Ç–∫—É–¥–∞ –±—ã–ª —É–¥–∞–ª—ë–Ω —Ñ–∞–π–ª
- media.deleted_at - –∫–æ–≥–¥–∞ –±—ã–ª —É–¥–∞–ª—ë–Ω
```

**–°–∏—Å—Ç–µ–º–Ω—ã–µ –ø–∞–ø–∫–∏ (ID 1-4):**
- ID 1: –û–±—â–∞—è
- ID 2: –í–∏–¥–µ–æ
- ID 3: –î–æ–∫—É–º–µ–Ω—Ç—ã
- ID 4: **–ö–æ—Ä–∑–∏–Ω–∞** (is_trash = true, protected = true)

---

### **2. Backend API** ‚úÖ

#### `app/Http/Controllers/Api/v1/MediaController.php`

**üîµ DELETE `/api/v1/media/{id}` - –£–¥–∞–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–∞**

**–õ–æ–≥–∏–∫–∞:**
- **–ï—Å–ª–∏ —Ñ–∞–π–ª –ù–ï –≤ –∫–æ—Ä–∑–∏–Ω–µ** ‚Üí –ø–µ—Ä–µ–º–µ—â–∞–µ—Ç –≤ –∫–æ—Ä–∑–∏–Ω—É (folder_id = 4)
  - –°–æ—Ö—Ä–∞–Ω—è–µ—Ç `original_folder_id` –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
  - –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç `deleted_at = now()`
  - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç `moved_to_trash: true`
  
- **–ï—Å–ª–∏ —Ñ–∞–π–ª –£–ñ–ï –≤ –∫–æ—Ä–∑–∏–Ω–µ** ‚Üí —É–¥–∞–ª—è–µ—Ç –±–µ–∑–≤–æ–∑–≤—Ä–∞—Ç–Ω–æ
  - –£–¥–∞–ª—è–µ—Ç —Ñ–∏–∑–∏—á–µ—Å–∫–∏–π —Ñ–∞–π–ª —Å –¥–∏—Å–∫–∞
  - –£–¥–∞–ª—è–µ—Ç –∑–∞–ø–∏—Å—å –∏–∑ –ë–î
  - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç `permanently_deleted: true`

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞ (–ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ –≤ –∫–æ—Ä–∑–∏–Ω—É):**
```json
{
  "success": true,
  "message": "–§–∞–π–ª –ø–µ—Ä–µ–º–µ—â—ë–Ω –≤ –∫–æ—Ä–∑–∏–Ω—É",
  "moved_to_trash": true,
  "data": {
    "id": 15,
    "original_folder_id": 1,
    "folder_id": 4,
    "deleted_at": "2025-11-08 12:34:56"
  }
}
```

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞ (–±–µ–∑–≤–æ–∑–≤—Ä–∞—Ç–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ):**
```json
{
  "success": true,
  "message": "–§–∞–π–ª –±–µ–∑–≤–æ–∑–≤—Ä–∞—Ç–Ω–æ —É–¥–∞–ª—ë–Ω",
  "permanently_deleted": true
}
```

---

**üü¢ POST `/api/v1/media/{id}/restore` - –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ –∫–æ—Ä–∑–∏–Ω—ã**

**–õ–æ–≥–∏–∫–∞:**
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ —Ñ–∞–π–ª –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –∫–æ—Ä–∑–∏–Ω–µ (folder_id = 4)
- –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç `folder_id` –∏–∑ `original_folder_id`
- –û—á–∏—â–∞–µ—Ç `original_folder_id` –∏ `deleted_at`
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–π —Ñ–∞–π–ª

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:**
```json
{
  "success": true,
  "message": "–§–∞–π–ª —É—Å–ø–µ—à–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω",
  "data": {
    "id": 15,
    "folder_id": 1,
    "original_folder_id": null,
    "deleted_at": null
  }
}
```

---

**üî¥ DELETE `/api/v1/media/trash/empty` - –û—á–∏—Å—Ç–∫–∞ –∫–æ—Ä–∑–∏–Ω—ã**

**–õ–æ–≥–∏–∫–∞:**
- –ü–æ–ª—É—á–∞–µ—Ç –≤—Å–µ —Ñ–∞–π–ª—ã –∏–∑ –∫–æ—Ä–∑–∏–Ω—ã (folder_id = 4)
- –£–¥–∞–ª—è–µ—Ç —Ñ–∏–∑–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã —Å –¥–∏—Å–∫–∞
- –£–¥–∞–ª—è–µ—Ç –∑–∞–ø–∏—Å–∏ –∏–∑ –ë–î
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É–¥–∞–ª—ë–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:**
```json
{
  "success": true,
  "message": "–ö–æ—Ä–∑–∏–Ω–∞ –æ—á–∏—â–µ–Ω–∞. –£–¥–∞–ª–µ–Ω–æ —Ñ–∞–π–ª–æ–≤: 12",
  "deleted_count": 12
}
```

---

### **3. Frontend (Vue.js)** ‚úÖ

#### `resources/js/src/UI/Media/index.vue`

**Computed —Å–≤–æ–π—Å—Ç–≤–∞:**
```javascript
isTrashFolder() {
  return this.storage.media?.current === 4
}
```

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ UI:**
- –ï—Å–ª–∏ `isTrashFolder = false` ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–Ω–æ–ø–∫–∏ "–ü–∞–ø–∫–∏", "–ó–∞–≥—Ä—É–∑–∫–∞", "–°–æ–∑–¥–∞—Ç—å –ø–∞–ø–∫—É"
- –ï—Å–ª–∏ `isTrashFolder = true` ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç:
  - ‚ö†Ô∏è –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ: "–ö–æ—Ä–∑–∏–Ω–∞ - —É–¥–∞–ª—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –º–æ–∂–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å"
  - üóëÔ∏è –ö–Ω–æ–ø–∫–∞ "–û—á–∏—Å—Ç–∏—Ç—å –∫–æ—Ä–∑–∏–Ω—É"

**–ú–µ—Ç–æ–¥ –æ—á–∏—Å—Ç–∫–∏ –∫–æ—Ä–∑–∏–Ω—ã:**
```javascript
async emptyTrash() {
  if (!confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –±–µ–∑–≤–æ–∑–≤—Ä–∞—Ç–Ω–æ —É–¥–∞–ª–∏—Ç—å –≤—Å–µ —Ñ–∞–π–ª—ã –∏–∑ –∫–æ—Ä–∑–∏–Ω—ã?')) {
    return
  }
  
  const response = await axios.delete('/api/v1/media/trash/empty')
  // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ—Ç —Å–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤
}
```

---

#### `resources/js/src/UI/Media/components/folders.vue`

**–ü–µ—Ä–µ–¥–∞—á–∞ —Ñ–ª–∞–≥–∞ –∫–æ—Ä–∑–∏–Ω—ã:**
```vue
<FilesList
  :is-trash-folder="currentFolderId === 4"
  @restore="restoreFile"
  ...
/>
```

**–ú–µ—Ç–æ–¥ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è:**
```javascript
async restoreFile(file) {
  if (!confirm(`–í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ñ–∞–π–ª "${file.original_name}"?`)) {
    return
  }
  
  const response = await axios.post(`/api/v1/media/${file.id}/restore`)
  await this.loadFiles(this.currentFolderId) // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º —Å–ø–∏—Å–æ–∫
}
```

---

#### `resources/js/src/UI/Media/components/FilesList.vue`

**Props:**
```javascript
isTrashFolder: {
  type: Boolean,
  default: false
}
```

**–£—Å–ª–æ–≤–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –∫–Ω–æ–ø–æ–∫:**

**–î–ª—è –æ–±—ã—á–Ω—ã—Ö –ø–∞–ø–æ–∫ (`isTrashFolder = false`):**
```html
<div class="file-actions">
  <button @click="$emit('download', file)">–°–∫–∞—á–∞—Ç—å</button>
  <button v-if="file.type === 'photo'" @click="$emit('edit', file)">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
  <button @click="$emit('move', file)">–ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å</button>
  <button @click="$emit('delete', file)">–£–¥–∞–ª–∏—Ç—å</button>
</div>
```

**–î–ª—è –∫–æ—Ä–∑–∏–Ω—ã (`isTrashFolder = true`):**
```html
<div class="file-actions actions-2">
  <button @click="$emit('restore', file)" class="btn-success w-100">
    <i class="fa-solid fa-undo"></i>
    –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
  </button>
  <button @click="$emit('delete', file)" class="btn-danger w-100">
    <i class="fa-solid fa-trash-can"></i>
    –£–¥–∞–ª–∏—Ç—å –Ω–∞–≤—Å–µ–≥–¥–∞
  </button>
</div>
```

**SCSS —Å—Ç–∏–ª–∏ –¥–ª—è –∫–æ—Ä–∑–∏–Ω—ã:**
```scss
.file-actions {
  &.actions-2 {
    flex-direction: column;
    gap: 8px;
    
    .btn {
      padding: 8px 12px;
      font-size: 13px;
      font-weight: 600;
    }
  }
}
```

---

## üéØ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π —Å—Ü–µ–Ω–∞—Ä–∏–π

### **–£–¥–∞–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–∞ –∏–∑ –ª—é–±–æ–π –ø–∞–ø–∫–∏:**

1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç "–£–¥–∞–ª–∏—Ç—å" –Ω–∞ —Ñ–∞–π–ª–µ –≤ –ø–∞–ø–∫–µ "–û–±—â–∞—è" (ID 1)
2. –§–∞–π–ª **–ù–ï —É–¥–∞–ª—è–µ—Ç—Å—è —Ñ–∏–∑–∏—á–µ—Å–∫–∏**
3. –§–∞–π–ª –ø–µ—Ä–µ–º–µ—â–∞–µ—Ç—Å—è –≤ –∫–æ—Ä–∑–∏–Ω—É:
   ```
   folder_id: 1 ‚Üí 4
   original_folder_id: null ‚Üí 1
   deleted_at: null ‚Üí 2025-11-08 12:34:56
   ```
4. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ: "–§–∞–π–ª –ø–µ—Ä–µ–º–µ—â—ë–Ω –≤ –∫–æ—Ä–∑–∏–Ω—É"

---

### **–ü—Ä–æ—Å–º–æ—Ç—Ä –∫–æ—Ä–∑–∏–Ω—ã:**

1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –ø–∞–ø–∫—É "–ö–æ—Ä–∑–∏–Ω–∞" (ID 4)
2. UI –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –º–µ–Ω—è–µ—Ç—Å—è:
   - ‚ùå –°–∫—Ä—ã—Ç—ã –∫–Ω–æ–ø–∫–∏ "–ü–∞–ø–∫–∏", "–ó–∞–≥—Ä—É–∑–∫–∞", "–°–æ–∑–¥–∞—Ç—å –ø–∞–ø–∫—É"
   - ‚úÖ –ü–æ–∫–∞–∑–∞–Ω–∞ –∫–Ω–æ–ø–∫–∞ "–û—á–∏—Å—Ç–∏—Ç—å –∫–æ—Ä–∑–∏–Ω—É"
   - ‚ö†Ô∏è –ü–æ–∫–∞–∑–∞–Ω–æ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ
3. –ù–∞ –∫–∞—Ä—Ç–æ—á–∫–∞—Ö —Ñ–∞–π–ª–æ–≤ **–í–°–ï –∫–Ω–æ–ø–∫–∏ –∑–∞–º–µ–Ω–µ–Ω—ã** –Ω–∞:
   - üîÑ **–í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å** (–∑–µ–ª—ë–Ω–∞—è)
   - üóëÔ∏è **–£–¥–∞–ª–∏—Ç—å –Ω–∞–≤—Å–µ–≥–¥–∞** (–∫—Ä–∞—Å–Ω–∞—è)

---

### **–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–∞:**

1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç "–í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å" –Ω–∞ —Ñ–∞–π–ª–µ
2. –ü–æ—è–≤–ª—è–µ—Ç—Å—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ: "–í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ñ–∞–π–ª `image.jpg`?"
3. –§–∞–π–ª –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –≤ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—É—é –ø–∞–ø–∫—É:
   ```
   folder_id: 4 ‚Üí 1
   original_folder_id: 1 ‚Üí null
   deleted_at: 2025-11-08 ‚Üí null
   ```
4. –§–∞–π–ª –∏—Å—á–µ–∑–∞–µ—Ç –∏–∑ –∫–æ—Ä–∑–∏–Ω—ã
5. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ: "–§–∞–π–ª —É—Å–ø–µ—à–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω"

---

### **–£–¥–∞–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–∞ –±–µ–∑–≤–æ–∑–≤—Ä–∞—Ç–Ω–æ:**

**–í–∞—Ä–∏–∞–Ω—Ç 1: –£–¥–∞–ª–µ–Ω–∏–µ –æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞**
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤ –∫–æ—Ä–∑–∏–Ω–µ –Ω–∞–∂–∏–º–∞–µ—Ç "–£–¥–∞–ª–∏—Ç—å –Ω–∞–≤—Å–µ–≥–¥–∞"
2. –§–∞–π–ª **—É–¥–∞–ª—è–µ—Ç—Å—è —Ñ–∏–∑–∏—á–µ—Å–∫–∏** —Å –¥–∏—Å–∫–∞
3. –ó–∞–ø–∏—Å—å —É–¥–∞–ª—è–µ—Ç—Å—è –∏–∑ –ë–î
4. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ: "–§–∞–π–ª –±–µ–∑–≤–æ–∑–≤—Ä–∞—Ç–Ω–æ —É–¥–∞–ª—ë–Ω"

**–í–∞—Ä–∏–∞–Ω—Ç 2: –û—á–∏—Å—Ç–∫–∞ –≤—Å–µ–π –∫–æ—Ä–∑–∏–Ω—ã**
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç "–û—á–∏—Å—Ç–∏—Ç—å –∫–æ—Ä–∑–∏–Ω—É"
2. –ü–æ—è–≤–ª—è–µ—Ç—Å—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ: "–í—ã —É–≤–µ—Ä–µ–Ω—ã? –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å!"
3. –í—Å–µ —Ñ–∞–π–ª—ã –≤ –∫–æ—Ä–∑–∏–Ω–µ —É–¥–∞–ª—è—é—Ç—Å—è —Ñ–∏–∑–∏—á–µ—Å–∫–∏
4. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ: "–ö–æ—Ä–∑–∏–Ω–∞ –æ—á–∏—â–µ–Ω–∞. –£–¥–∞–ª–µ–Ω–æ —Ñ–∞–π–ª–æ–≤: 12"

---

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### **–ó–∞—â–∏—Ç–∞ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –ø–∞–ø–æ–∫:**
```php
// –í –º–æ–¥–µ–ª–∏ Folder
public function isProtected(): bool {
    return $this->protected === true;
}

public function isTrash(): bool {
    return $this->is_trash === true;
}
```

### **–ó–∞–ø—Ä–µ—Ç –∑–∞–≥—Ä—É–∑–∫–∏ –≤ –∫–æ—Ä–∑–∏–Ω—É:**
–í `MediaController::store()` –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É:
```php
$folder = Folder::find($request->folder_id);
if ($folder && $folder->isTrash()) {
    return response()->json([
        'success' => false,
        'message' => '–ù–µ–ª—å–∑—è –∑–∞–≥—Ä—É–∂–∞—Ç—å —Ñ–∞–π–ª—ã –Ω–∞–ø—Ä—è–º—É—é –≤ –∫–æ—Ä–∑–∏–Ω—É'
    ], 403);
}
```

---

## üì¶ API Routes

```php
Route::apiResource('media', MediaController::class);
Route::post('media/{id}/restore', [MediaController::class, 'restore'])->name('media.restore');
Route::delete('media/trash/empty', [MediaController::class, 'emptyTrash'])->name('media.trash.empty');
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### **–¢–µ—Å—Ç 1: –ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ –≤ –∫–æ—Ä–∑–∏–Ω—É**
```bash
DELETE http://crm.loc/api/v1/media/15
```
**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```json
{
  "success": true,
  "message": "–§–∞–π–ª –ø–µ—Ä–µ–º–µ—â—ë–Ω –≤ –∫–æ—Ä–∑–∏–Ω—É",
  "moved_to_trash": true
}
```

### **–¢–µ—Å—Ç 2: –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ**
```bash
POST http://crm.loc/api/v1/media/15/restore
```
**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```json
{
  "success": true,
  "message": "–§–∞–π–ª —É—Å–ø–µ—à–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω"
}
```

### **–¢–µ—Å—Ç 3: –£–¥–∞–ª–µ–Ω–∏–µ –∏–∑ –∫–æ—Ä–∑–∏–Ω—ã**
```bash
# –°–Ω–∞—á–∞–ª–∞ –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É
DELETE http://crm.loc/api/v1/media/15

# –ü–æ—Ç–æ–º —É–¥–∞–ª–∏—Ç—å –±–µ–∑–≤–æ–∑–≤—Ä–∞—Ç–Ω–æ
DELETE http://crm.loc/api/v1/media/15
```
**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```json
{
  "success": true,
  "message": "–§–∞–π–ª –±–µ–∑–≤–æ–∑–≤—Ä–∞—Ç–Ω–æ —É–¥–∞–ª—ë–Ω",
  "permanently_deleted": true
}
```

### **–¢–µ—Å—Ç 4: –û—á–∏—Å—Ç–∫–∞ –∫–æ—Ä–∑–∏–Ω—ã**
```bash
DELETE http://crm.loc/api/v1/media/trash/empty
```
**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```json
{
  "success": true,
  "message": "–ö–æ—Ä–∑–∏–Ω–∞ –æ—á–∏—â–µ–Ω–∞. –£–¥–∞–ª–µ–Ω–æ —Ñ–∞–π–ª–æ–≤: 5",
  "deleted_count": 5
}
```

---

## üìù –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è:

```php
Log::info('File moved to trash', [
    'media_id' => $media->id,
    'from_folder' => $media->original_folder_id,
    'to_trash' => $trashFolder->id
]);

Log::info('File permanently deleted from filesystem', ['path' => $filePath]);

Log::info('File restored from trash', [
    'media_id' => $media->id,
    'restored_to_folder' => $media->folder_id
]);

Log::info('Trash emptied', ['deleted_files' => $deletedCount]);
```

---

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

- [x] –ú–∏–≥—Ä–∞—Ü–∏—è `add_protected_to_folders_table`
- [x] –ú–∏–≥—Ä–∞—Ü–∏—è `add_original_folder_id_to_media_table`
- [x] –ú–µ—Ç–æ–¥ `destroy()` —Å –ª–æ–≥–∏–∫–æ–π –∫–æ—Ä–∑–∏–Ω—ã
- [x] –ú–µ—Ç–æ–¥ `restore()` –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
- [x] –ú–µ—Ç–æ–¥ `emptyTrash()` –¥–ª—è –æ—á–∏—Å—Ç–∫–∏
- [x] –†–æ—É—Ç—ã API
- [x] MediaResource —Å –ø–æ–ª—è–º–∏ –∫–æ—Ä–∑–∏–Ω—ã
- [x] Computed `isTrashFolder` –≤ index.vue
- [x] –ú–µ—Ç–æ–¥ `emptyTrash()` –≤ index.vue
- [x] –ü–µ—Ä–µ–¥–∞—á–∞ `is-trash-folder` –≤ folders.vue
- [x] –ú–µ—Ç–æ–¥ `restoreFile()` –≤ folders.vue
- [x] Prop `isTrashFolder` –≤ FilesList.vue
- [x] –£—Å–ª–æ–≤–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –∫–Ω–æ–ø–æ–∫ –≤ FilesList.vue
- [x] SCSS —Å—Ç–∏–ª–∏ –¥–ª—è `.actions-2`
- [x] Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

---

## üéâ –†–µ–∑—É–ª—å—Ç–∞—Ç

**–ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—á–∞—è —Å–∏—Å—Ç–µ–º–∞ –∫–æ—Ä–∑–∏–Ω—ã** —Å:
- ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω—ã–º —É–¥–∞–ª–µ–Ω–∏–µ–º (–≤ 2 —ç—Ç–∞–ø–∞)
- ‚úÖ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ–º —Ñ–∞–π–ª–æ–≤
- ‚úÖ –û—á–∏—Å—Ç–∫–æ–π –∫–æ—Ä–∑–∏–Ω—ã
- ‚úÖ –ò–Ω—Ç—É–∏—Ç–∏–≤–Ω—ã–º UI
- ‚úÖ API –¥–ª—è –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º –¥–µ–π—Å—Ç–≤–∏–π

---

## üì∏ UI –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è

### –û–±—ã—á–Ω–∞—è –ø–∞–ø–∫–∞:
```
[–ü–∞–ø–∫–∏] [–ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤] [–°–æ–∑–¥–∞—Ç—å –ø–∞–ø–∫—É]

–§–∞–π–ª—ã:
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   image.jpg     ‚îÇ
‚îÇ [‚¨áÔ∏è][‚úèÔ∏è][üìÅ][üóëÔ∏è] ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –ö–æ—Ä–∑–∏–Ω–∞:
```
‚ö†Ô∏è –ö–æ—Ä–∑–∏–Ω–∞ - —É–¥–∞–ª—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –º–æ–∂–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å [–û—á–∏—Å—Ç–∏—Ç—å –∫–æ—Ä–∑–∏–Ω—É]

–§–∞–π–ª—ã:
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   image.jpg     ‚îÇ
‚îÇ [üîÑ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å]‚îÇ
‚îÇ [üóëÔ∏è –£–¥–∞–ª–∏—Ç—å –Ω–∞–≤—Å–µ–≥–¥–∞]‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

**–ê–≤—Ç–æ—Ä:** CRM Team  
**–î–∞—Ç–∞:** 08.11.2025  
**–í–µ—Ä—Å–∏—è:** 1.0.0

