# üîÑ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—á—ë—Ç—á–∏–∫–∞ —Ñ–∞–π–ª–æ–≤ –≤ –∫–æ—Ä–∑–∏–Ω–µ

## üêõ –ü—Ä–æ–±–ª–µ–º–∞

–ü–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è —Ñ–∞–π–ª–∞ (–ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è –≤ –∫–æ—Ä–∑–∏–Ω—É) –∏–ª–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è —Ñ–∞–π–ª–∞ –∏–∑ –∫–æ—Ä–∑–∏–Ω—ã —Å—á—ë—Ç—á–∏–∫ —Ñ–∞–π–ª–æ–≤ –≤ –ø–∞–ø–∫–∞—Ö –Ω–µ –æ–±–Ω–æ–≤–ª—è–ª—Å—è.

**–ü—Ä–∏–º–µ—Ä:**
```
–ö–æ—Ä–∑–∏–Ω–∞ (0 —Ñ–∞–π–ª–æ–≤) ‚Üí –£–¥–∞–ª–∏—Ç—å —Ñ–∞–π–ª ‚Üí –ö–æ—Ä–∑–∏–Ω–∞ (0 —Ñ–∞–π–ª–æ–≤) ‚ùå
–î–æ–ª–∂–Ω–æ –±—ã—Ç—å: –ö–æ—Ä–∑–∏–Ω–∞ (1 —Ñ–∞–π–ª) ‚úÖ
```

---

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### **1. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ `folders.vue`**

#### **–ú–µ—Ç–æ–¥ `deleteFile()`**
–î–æ–±–∞–≤–ª–µ–Ω —ç–º–∏—Ç —Å–æ–±—ã—Ç–∏—è `folders-reordered` –ø–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è —Ñ–∞–π–ª–∞:

```javascript
async deleteFile(file) {
    const response = await axios.delete(`/api/v1/media/${file.id}`)
    
    // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º —Å–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤
    await this.loadFiles(this.currentFolderId)
    
    // ‚úÖ –î–û–ë–ê–í–õ–ï–ù–û: –£–≤–µ–¥–æ–º–ª—è–µ–º —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
    this.$emit('folders-reordered')
}
```

#### **–ú–µ—Ç–æ–¥ `restoreFile()`**
–¢–∞–∫–∂–µ –¥–æ–±–∞–≤–ª–µ–Ω —ç–º–∏—Ç —Å–æ–±—ã—Ç–∏—è –ø–æ—Å–ª–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è:

```javascript
async restoreFile(file) {
    const response = await axios.post(`/api/v1/media/${file.id}/restore`)
    
    // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º —Å–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤ –≤ –∫–æ—Ä–∑–∏–Ω–µ
    await this.loadFiles(this.currentFolderId)
    
    // ‚úÖ –î–û–ë–ê–í–õ–ï–ù–û: –£–≤–µ–¥–æ–º–ª—è–µ–º —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
    this.$emit('folders-reordered')
}
```

---

### **2. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ `index.vue`**

#### **–ú–µ—Ç–æ–¥ `emptyTrash()`**
–î–æ–±–∞–≤–ª–µ–Ω –≤—ã–∑–æ–≤ `getFolders()` –ø–æ—Å–ª–µ –æ—á–∏—Å—Ç–∫–∏ –∫–æ—Ä–∑–∏–Ω—ã:

```javascript
async emptyTrash() {
    const response = await axios.delete('/api/v1/media/trash/empty')
    
    // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º —Å–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤
    if (this.$refs.currentComponentRef) {
        this.$refs.currentComponentRef.loadFiles(this.storage.media?.current || null)
    }
    
    // ‚úÖ –î–û–ë–ê–í–õ–ï–ù–û: –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º —Å—á—ë—Ç—á–∏–∫ –ø–∞–ø–æ–∫
    await this.getFolders(this.storage.media?.current || null)
}
```

---

### **3. –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç**

#### **–°—Ö–µ–º–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—á—ë—Ç—á–∏–∫–∞:**

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–¥–∞–ª—è–µ—Ç —Ñ–∞–π–ª –∏–∑ –ø–∞–ø–∫–∏ "–û–±—â–∞—è"     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                     ‚îÇ
                     ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ folders.vue ‚Üí deleteFile()                      ‚îÇ
‚îÇ   1. DELETE /api/v1/media/{id}                  ‚îÇ
‚îÇ   2. loadFiles(currentFolderId)                 ‚îÇ
‚îÇ   3. $emit('folders-reordered') ‚úÖ              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                     ‚îÇ
                     ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ index.vue ‚Üí handleFoldersReordered()            ‚îÇ
‚îÇ   1. getFolders(parentId)                       ‚îÇ
‚îÇ   2. GET /api/v1/folders?parent_id=null         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                     ‚îÇ
                     ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Backend ‚Üí FolderController::index()             ‚îÇ
‚îÇ   1. Folder::with('children')->get()            ‚îÇ
‚îÇ   2. filesCount() –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ—Ç —Ñ–∞–π–ª—ã           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                     ‚îÇ
                     ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ FolderResource –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:    ‚îÇ
‚îÇ   - –û–±—â–∞—è (2 —Ñ–∞–π–ª–∞) ‚¨áÔ∏è                          ‚îÇ
‚îÇ   - –ö–æ—Ä–∑–∏–Ω–∞ (1 —Ñ–∞–π–ª) ‚¨ÜÔ∏è                         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                     ‚îÇ
                     ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ UI –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ                        ‚îÇ
‚îÇ   ‚úÖ –°—á—ë—Ç—á–∏–∫–∏ –∞–∫—Ç—É–∞–ª—å–Ω—ã!                        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

### **4. –ú–æ–¥–µ–ª—å `Folder` - –ú–µ—Ç–æ–¥ `filesCount()`**

–°—á—ë—Ç—á–∏–∫ —Ñ–∞–π–ª–æ–≤ –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ:

```php
public function filesCount(): Attribute
{
    return Attribute::make(
        get: fn () => $this->files()->count(),
    );
}
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –í—Å–µ–≥–¥–∞ –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- ‚úÖ –ù–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –≤ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª—è—Ö –≤ –ë–î
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ—Å—á—ë—Ç –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ

---

### **5. FolderResource - –§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞**

```json
{
  "data": [
    {
      "id": 1,
      "name": "–û–±—â–∞—è",
      "count": 2,
      "countFolder": 0
    },
    {
      "id": 4,
      "name": "–ö–æ—Ä–∑–∏–Ω–∞",
      "count": 1,
      "countFolder": 0
    }
  ]
}
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### **–¢–µ—Å—Ç 1: –£–¥–∞–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–∞**
1. –û—Ç–∫—Ä—ã—Ç—å –ø–∞–ø–∫—É "–û–±—â–∞—è" (3 —Ñ–∞–π–ª–∞)
2. –£–¥–∞–ª–∏—Ç—å —Ñ–∞–π–ª
3. **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
   - "–û–±—â–∞—è" ‚Üí 2 —Ñ–∞–π–ª–∞ ‚úÖ
   - "–ö–æ—Ä–∑–∏–Ω–∞" ‚Üí 1 —Ñ–∞–π–ª ‚úÖ

### **–¢–µ—Å—Ç 2: –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–∞**
1. –û—Ç–∫—Ä—ã—Ç—å "–ö–æ—Ä–∑–∏–Ω—É" (1 —Ñ–∞–π–ª)
2. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ñ–∞–π–ª
3. **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
   - "–ö–æ—Ä–∑–∏–Ω–∞" ‚Üí 0 —Ñ–∞–π–ª–æ–≤ ‚úÖ
   - "–û–±—â–∞—è" ‚Üí 3 —Ñ–∞–π–ª–∞ ‚úÖ

### **–¢–µ—Å—Ç 3: –û—á–∏—Å—Ç–∫–∞ –∫–æ—Ä–∑–∏–Ω—ã**
1. –£–¥–∞–ª–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ñ–∞–π–ª–æ–≤ –∏–∑ —Ä–∞–∑–Ω—ã—Ö –ø–∞–ø–æ–∫
2. –û—Ç–∫—Ä—ã—Ç—å "–ö–æ—Ä–∑–∏–Ω—É" (5 —Ñ–∞–π–ª–æ–≤)
3. –ù–∞–∂–∞—Ç—å "–û—á–∏—Å—Ç–∏—Ç—å –∫–æ—Ä–∑–∏–Ω—É"
4. **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
   - "–ö–æ—Ä–∑–∏–Ω–∞" ‚Üí 0 —Ñ–∞–π–ª–æ–≤ ‚úÖ

### **–¢–µ—Å—Ç 4: –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ**
1. –£–¥–∞–ª–∏—Ç—å 3 —Ñ–∞–π–ª–∞ –ø–æ–¥—Ä—è–¥ –∏–∑ "–û–±—â–µ–π"
2. **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
   - –ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è —Å—á—ë—Ç—á–∏–∫–∏ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è ‚úÖ
   - –ù–µ—Ç –ª–∞–≥–æ–≤ –∏–ª–∏ –∑–∞–¥–µ—Ä–∂–µ–∫ ‚úÖ

---

## üìä –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤:**

**–î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
```
–£–¥–∞–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–∞ ‚Üí 1 –∑–∞–ø—Ä–æ—Å (DELETE)
```

**–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
```
–£–¥–∞–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–∞ ‚Üí 2 –∑–∞–ø—Ä–æ—Å–∞:
  1. DELETE /api/v1/media/{id}
  2. GET /api/v1/folders?parent_id=null
```

**–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞:** +1 –∑–∞–ø—Ä–æ—Å –Ω–∞ –æ–ø–µ—Ä–∞—Ü–∏—é
**–í–ª–∏—è–Ω–∏–µ:** –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ (–∑–∞–ø—Ä–æ—Å –ø–∞–ø–æ–∫ –ª—ë–≥–∫–∏–π)

### **–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è (–Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã):**

#### **–í–∞—Ä–∏–∞–Ω—Ç 1: WebSocket**
–†–µ–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ WebSocket/Pusher.

**–ü–ª—é—Å—ã:**
- –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–ª—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ù–µ—Ç –¥—É–±–ª–∏—Ä—É—é—â–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

**–ú–∏–Ω—É—Å—ã:**
- –¢—Ä–µ–±—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ WebSocket —Å–µ—Ä–≤–µ—Ä–∞
- –°–ª–æ–∂–Ω–æ—Å—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

#### **–í–∞—Ä–∏–∞–Ω—Ç 2: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤ –æ—Ç–≤–µ—Ç–µ API**
–í–æ–∑–≤—Ä–∞—â–∞—Ç—å –æ–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–µ —Å—á—ë—Ç—á–∏–∫–∏ –≤ –æ—Ç–≤–µ—Ç–µ `destroy()`.

**–ü–ª—é—Å—ã:**
- –ë–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

**–ú–∏–Ω—É—Å—ã:**
- –¢—Ä–µ–±—É–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –æ—Ç–≤–µ—Ç–∞
- –£—Å–ª–æ–∂–Ω—è–µ—Ç –ª–æ–≥–∏–∫—É –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞

#### **–í–∞—Ä–∏–∞–Ω—Ç 3: –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ**
–ö–µ—à–∏—Ä–æ–≤–∞—Ç—å —Å—á—ë—Ç—á–∏–∫–∏ –ø–∞–ø–æ–∫.

**–ü–ª—é—Å—ã:**
- –ë—ã—Å—Ç—Ä—ã–π –æ—Ç–≤–µ—Ç

**–ú–∏–Ω—É—Å—ã:**
- –¢—Ä–µ–±—É–µ—Ç —Å–±—Ä–æ—Å–∞ –∫–µ—à–∞ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö
- –í–æ–∑–º–æ–∂–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã —Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–µ–π

---

## ‚úÖ –ò—Ç–æ–≥–æ–≤–æ–µ —Ä–µ—à–µ–Ω–∏–µ

**–í—ã–±—Ä–∞–Ω–æ –ø—Ä–æ—Å—Ç–æ–µ –∏ –Ω–∞–¥—ë–∂–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ:**
- ‚úÖ –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–¥–∞
- ‚úÖ –ù–∞–¥—ë–∂–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—á—ë—Ç—á–∏–∫–æ–≤
- ‚úÖ –ù–µ—Ç –ø—Ä–æ–±–ª–µ–º —Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–µ–π
- ‚úÖ –õ—ë–≥–∫–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞

---

## üìù –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

1. ‚úÖ `resources/js/src/UI/Media/components/folders.vue`
   - –ú–µ—Ç–æ–¥ `deleteFile()` - –¥–æ–±–∞–≤–ª–µ–Ω `$emit('folders-reordered')`
   - –ú–µ—Ç–æ–¥ `restoreFile()` - –¥–æ–±–∞–≤–ª–µ–Ω `$emit('folders-reordered')`

2. ‚úÖ `resources/js/src/UI/Media/index.vue`
   - –ú–µ—Ç–æ–¥ `emptyTrash()` - –¥–æ–±–∞–≤–ª–µ–Ω `await this.getFolders()`

3. ‚úÖ –ë–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π:
   - `app/Models/Folder.php` - –º–µ—Ç–æ–¥ `filesCount()` —É–∂–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
   - `app/Http/Resources/FolderResource.php` - `count` —É–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `filesCount`
   - `app/Http/Controllers/Api/v1/FolderController.php` - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

---

**–ê–≤—Ç–æ—Ä:** CRM Team  
**–î–∞—Ç–∞:** 08.11.2025  
**–í–µ—Ä—Å–∏—è:** 1.0.1 (Hotfix)

